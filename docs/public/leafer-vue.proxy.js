import{watch as x}from"vue";function p(e,t){x(()=>i(e),r=>{t.set(r)})}function i(e){let t={};return Object.keys(e).forEach(r=>{r.startsWith("on")||(t[r]=e[r])}),t}import{App as C}from"leafer-ui";import{defineComponent as U,h as y,onMounted as L,onUnmounted as $,ref as P,renderSlot as N}from"vue";function f(){function e(t){let r={content:"",css:[]};t.unshift({content:" [Leafer-vue warn:] ",color:"#FFF"}),t.forEach((n,o)=>{r.content+=`%c${n?.content??" "}`,r.css.push(`${n?.color?`color:${n.color}`:""}${n?.backgroundColor?`;background:${n.backgroundColor}`:""};padding: 0px${o===0?";border-top-left-radius: 25px; border-bottom-left-radius: 8px":""}${o===t.length-1?";border-top-right-radius: 8px; border-bottom-right-radius: 8px":""}`)}),console.warn(`${r.content}`,...r.css)}return{log:e}}function m(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}function u(e){return e.replace(/^(on:?)?|Once$/g,"").replace(/([A-Z])/g,(t,r,n)=>n===0?r.toLowerCase():`.${r.toLowerCase()}`)}import{UI as w}from"leafer-ui";import{camelize as A,createRenderer as E,markRaw as b}from"vue";import{Leaf as I}from"leafer-ui";var a=class extends I{constructor(){super(...arguments);this.visible=!1}};var{log:v}=f(),d=E({createElement(e,t,r){let n;if(e==="Custom")if(r)n=new r;else throw new Error("Custom tag must have is attribute");else n=w.one({tag:e});return b(n),n},patchProp(e,t,r,n){if(t=A(t),m(t)){let o=u(t);t.endsWith("Once")?e.once(o,n):e.on(o,n)}else e[t]=n===""?!0:n},insert(e,t){t?.tag==="App"&&e?.tag!=="Leafer"||e&&t&&t.add(e)},remove(e){e?.destroy()},createText(e){let t=e.trim();return t&&v([{content:"Direct text writing is not supported, please use "},{color:"#6eacf8",backgroundColor:"#222222",content:`<Text text="${t}" />`},{content:" instead"}]),new a},createComment(){return new a},setText(){},setElementText(){},parentNode(e){return e?.parent},nextSibling(e){if(!e||!e.parent)return null;let t=e.parent.children,r=t.findIndex(n=>n.innerId===e.innerId);return r+1<t.length?t[r+1]:null}});var l=d.createApp;var Y=U({inheritAttrs:!1,setup(e,{slots:t,expose:r,attrs:n}){let o=P(),c=i(n),s;function g(){s=new C({...c,view:o.value,width:c.width||800,height:c.height||600}),l({render:()=>N(t,"default")}).mount(s)}function h(){s.destroy()}return L(()=>{g(),p(n,s),r(s)}),$(h),()=>y("canvas",{ref:o})}});export{Y as LeaferApp};
