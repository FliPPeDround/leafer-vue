import{defineComponent as C,h as U,onMounted as y,onUnmounted as $,ref as P,renderSlot as L}from"vue";import{App as N}from"leafer-ui";import{UI as I}from"leafer-ui";import{camelize as A,createRenderer as b,markRaw as w}from"vue";import{UI as x}from"leafer-ui";var c=class extends x{constructor(){super(...arguments);this.visible=!1}};function p(){function e(t){let r={content:"",css:[]};t.unshift({content:"\u2618\uFE0FLeafer-vue warn:"}),t.forEach((n,o)=>{r.content+=`%c${n?.content??" "}`,r.css.push(`${n?.color?`color:${n.color}`:""}${n?.backgroundColor?`;background:${n.backgroundColor}`:""};padding: 0px${o===0?";border-top-left-radius: 25px; border-bottom-left-radius: 8px":""}${o===t.length-1?";border-top-right-radius: 8px; border-bottom-right-radius: 8px":""}`)}),console.warn(`${r.content}`,...r.css)}return{log:e}}function f(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}function m(e){return e.replace(/^(on:?)?|Once$/g,"").replace(/([A-Z])/g,(t,r,n)=>n===0?r.toLowerCase():`.${r.toLowerCase()}`)}var{log:E}=p(),u=b({createElement(e){let t=I.one({tag:e});return w(t),t},patchProp(e,t,r,n){if(t=A(t),f(t)){let o=m(t);t.endsWith("Once")?e.once(o,n):e.on(o,n)}else e[t]=n===""?!0:n},insert(e,t){e&&t&&t.add(e)},remove(e){e?.destroy()},createText(e){let t=e.trim();return t&&E([{content:"[leafer-vue warn:]",color:"#feb027"},{content:"Direct text writing is not supported, please use "},{color:"#6eacf8",backgroundColor:"#222222",content:`<Text text="${t}" />`},{content:" instead"}]),null},createComment(){return new c},setText(){},setElementText(){},parentNode(e){return e?.parent},nextSibling(e){if(!e||!e.parent)return null;let t=e.parent.children,r=t.findIndex(n=>n.innerId===e.innerId);return r+1<t.length?t[r+1]:null}});var d=u.createApp;function a(e){let t={};return Object.keys(e).forEach(r=>{r.startsWith("on")||(t[r]=e[r])}),t}import{watch as v}from"vue";function l(e,t){v(()=>a(e),r=>{t.set(r)})}var k=C({inheritAttrs:!1,setup(e,{slots:t,expose:r,attrs:n}){let o=P(),i=a(n),s;function g(){s=new N({...i,view:o.value,width:i.width||800,height:i.height||600}),d({render:()=>L(t,"default")}).mount(s)}function h(){s.destroy()}return y(()=>{g(),l(n,s),r(s)}),$(h),()=>U("canvas",{ref:o})}});export{k as LeaferApp};
